<h1>Simplified blockchain implementation</h1>
<h2>About</h2>
<p>This program simulates a simplified version of a blockchain. It generates a set amount of users and transactions between those users, then mines blocks by picking a certain amount of transactions from the generated list and using a hashing function I made with the help of Claude AI to mine it and add it to the blockchain.</p>
<h2>UTXO model</h2>
<p>This implementation uses the UTXO model, so in all the transactions, payment is done through the creation and destruction of UTXOs. When the transaction is first generated, the UTXOs aren't added or deducted from users' wallets yet - they're only flagged as inputs or generated as outputs. They are only added to users' wallets or destroyed when the transaction is included in a block and added to the blockchain. Each user has 50 UTXOs that are worth between 50 and 500 to begin with. This number was initially diffent (10 UTXOs worth between 100 and 1000), but because all the transactions are generated at once and users only get the UTXOs they receive in transactions after all those transactions are generated and put into blocks, users were running out of UTXO before all the transactions were generated, so I had to give them more.</p>
<p>Each UTXO has an ID, which is generated by hashing its owner's name and public key, along with its value and salt, and a value. It also has an attribute 'used', which "reserves" the UTXO for a transaction, so it is not used in other transactions after already being used in one, along with a transaction ID, which helps determine which transaction it was used in (helpful for UTXO destruction algorithm afterwards). It also has a change flag to determine if this UTXO was given to a user as change in a previous transaction, but this is purely to simplify writing transaction logs and does not affect the calculations whatsoever.</p>
<h2>Step-by-step overview</h2>
<h3>Input</h3>
<p>Upon starting the program, the user is prompted to input the desired amount of users and transactions to generate, as well as the desired block size and difficulty<p>
<h3>Generating users</h3>
<p>The program generates the desired number of users, each of them have a username ("User_" and their number) and a public key, which is made by hashing their username, combined with a randomly generated salt. Then each of them gets 50 UTXOs with random values between 50 and 500 to spend in the transactions.</p>
<h3>Generating transactions</h3>
<p>The program then generates the desired number of transactions - it randomly picks two users from the list, checks that they are not the same person and that the sender has money to spend. A random amount to transfer is then generated (but it is ensured that this amount is not larger than the sender's balance). In each transaction, the program goes over the UTXOs that the sender has, flags them as used in this transaction and then creates an equivalent UTXO in the transaction output list (but doesn't append it to the receiver yet). This goes on until it processes an UTXO that has the same value as the amount left to pay, at which point it ends the transaction, or has a value that is greater than the amount left to pay, which would cause it to generate two outputs - one for the receiver and one for the sender as change, before also ending the transaction. </p>
<h3>Mining blocks</h3>
<p>When all the transactions are generated, the mining process can begin. It's done using OpenMP multithreading - there are five threads competing to mine a block. Each thread randomly picks a number of transactions, which is determined by the block size variable, to be included in the block. The program then sets a maximum amount of attempts (initially this is 1000). All the threads then take one list of transactions and attempt to mine it. All the transactions are hashed using a Merkle Tree and, along with other block header parameters, are all hashed into a block hash. This block hash is then checked against the set difficulty (the required amount of zeroes at the start of a hash for a block to be valid) ahd if it is valid, it terminates the mining process for all the threads and the new block is returned. Otherwise, if all the threads go through the maximum number of attempts and there isn't a single block mined, the function is terminated, the maximum amount is doubled from the previous try, and the program tries to mine the same blocks again.</p>
<h3>Adding to the blockchain</h3>
<p>Once a new block is mined, it is added to the blockchain, and all the UTXOs that were used or created in the transactions of the block are finalized - used UTXOs are removed from the users' wallets, and new UTXOs are added.</p>
<h3>Output</h3>
<p>All the transaction generating and mining is logged and printed in the console, as well as text files, called 'transaction-log.txt' and 'mining-log.txt'</p>
<h2>AI help</h2>
<p>Claude AI was used in the making of this in order to make the used hash more efficient, because the hash I made on my own was too slow for the mining process and would've taken forever. Claude AI was also used to help implement parallel mining, because I had had very little experience with OpenMP and there weren't many resources for my particular situation that I could find.</p>
<h2>Screenshots</h2>
<img width="916" height="657" alt="Screenshot 2025-10-29 224940" src="https://github.com/user-attachments/assets/7b9bedc2-bb3c-47fc-9c53-a72687b07962" />
<img width="1139" height="1088" alt="Screenshot 2025-10-29 224533" src="https://github.com/user-attachments/assets/35ca0731-8aa1-437f-85b7-969d39e5d364" />
<h2>Setup</h2>
<h3>Setup guide using make</h3>
<ol>
    <li><a href="https://codefinity.com/blog/A-step-by-step-guide-to-Git-installation?utm_source=google&utm_medium=cpc&utm_campaign=21413601262&utm_content=&utm_term=&dki=&gad_source=1&gad_campaignid=21409590893&gbraid=0AAAAABTeUgSZ7Ulz-l3XpMFdKumiEbn1r&gclid=CjwKCAjw_-3GBhAYEiwAjh9fUGsC8VLlpsHRSPLBB7AHe0LuNQK0RmGwhNuy7P4KjUFxwQMkV505rRoCz8YQAvD_BwE">Install git</a> and <a href="https://medium.com/@AliMasaoodi/installing-make-on-windows-10-using-chocolatey-a-step-by-step-guide-5e178c449394">make</a></li>
    <li><a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository">Clone this repository</a></li>
    <li>Open the command prompt on your computer</li>
    <li>Navigate to the directory you cloned this repository into
    <li>Type "make" into your command prompt to build the project</li>
    <li>Type "make run" into your command prompt to run the program - this will start the program and you will be able to see the generated transactions and mined blocks in your console.</li>
</ol>
